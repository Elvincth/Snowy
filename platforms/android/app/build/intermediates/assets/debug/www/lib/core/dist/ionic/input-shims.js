/*!
 * (C) Ionic http://ionicframework.com - MIT License
 * Built with http://stenciljs.com
 */
const{h:t}=window.Ionic;import{l as e}from"./chunk-e7816c0b.js";const n="$ionRelocated";function o(t,e,o,r=0){t[n]!==o&&(o?(!function(t,e){const n=t.parentElement,o=t.ownerDocument;if(t&&n){const r=t.offsetTop,i=t.offsetLeft,s=t.offsetWidth,a=t.offsetHeight,c=o.createElement("div"),l=c.style;c.classList.add(...Array.from(t.classList)),c.classList.add("cloned-input"),c.setAttribute("aria-hidden","true"),l.pointerEvents="none",l.position="absolute",l.top=r+"px",l.left=i+"px",l.width=s+"px",l.height=a+"px";const u=o.createElement("input");u.classList.add(...Array.from(e.classList)),u.value=e.value,u.type=e.type,u.placeholder=e.placeholder,u.tabIndex=-1,c.appendChild(u),n.appendChild(c),t.style.pointerEvents="none"}e.style.transform="scale(0)"}(t,e),e.style.transform=`translate3d(${"rtl"===t.ownerDocument.dir?9999:-9999}px,${r}px,0)`):function(t,e){t&&t.parentElement&&(Array.from(t.parentElement.querySelectorAll(".cloned-input")).forEach(t=>t.remove()),t.style.pointerEvents=""),e.style.transform="",e.style.opacity=""}(t,e),t[n]=o)}function r(t){return t===t.ownerDocument.activeElement}const i="input, textarea, [no-blur]",s=.3;function a(t,n,i,a){let c;const l=t=>{c=e(t)},u=l=>{if(!c)return;(function(t,e,n){if(c&&n){const t=c.x-n.x,e=c.y-n.y;return t*t+e*e>36}return!1})(0,0,e(l))||r(n)||(l.preventDefault(),l.stopPropagation(),function(t,e,n,r){const i=function(t,e,n){return function(t,e,n,o){const r=t.top,i=t.bottom,a=e.top+10,c=Math.min(e.bottom,o-n)/2-i,l=a-r,u=Math.round(c<0?-c:l>0?-l:0),d=Math.abs(u);return{scrollAmount:u,scrollDuration:Math.min(400,Math.max(150,d/s)),scrollPadding:n,inputSafeY:4-(r-a)}}((t.closest("ion-item,[ion-item]")||t).getBoundingClientRect(),e.getBoundingClientRect(),n,window.innerHeight)}(t,n,r);Math.abs(i.scrollAmount)<4?e.focus():(o(t,e,!0,i.inputSafeY),e.focus(),n.scrollByPoint(0,i.scrollAmount,i.scrollDuration).then(()=>{o(t,e,!1,i.inputSafeY),e.focus()}))}(t,n,i,a))};return t.addEventListener("touchstart",l,!0),t.addEventListener("touchend",u,!0),()=>{t.removeEventListener("touchstart",l,!0),t.removeEventListener("touchend",u,!0)}}const c="$ionPaddingTimer";function l(t,e){if("INPUT"!==t.tagName)return;if(t.parentElement&&"ION-INPUT"===t.parentElement.tagName)return;const n=t.closest("ion-content");if(null===n)return;const o=n[c];o&&clearTimeout(o),e>0?n.style.setProperty("--keyboard-offset",`${e}px`):n[c]=setTimeout(()=>{n.style.setProperty("--keyboard-offset","0px")},120)}const u=!0,d=!0;function f(t,e){const n=e.getNumber("keyboardHeight",290),s=e.getBoolean("scrollAssist",!0),c=e.getBoolean("hideCaretOnScroll",!0),f=e.getBoolean("inputBlurring",!0),p=e.getBoolean("scrollPadding",!0),m=new WeakMap,h=new WeakMap;function v(t){const e=(t.shadowRoot||t).querySelector("input"),i=t.closest("ion-content");if(e){if(i&&c&&!m.has(t)){const n=function(t,e,n){if(!n||!e)return()=>{};const i=n=>{r(e)&&o(t,e,n)},s=()=>o(t,e,!1),a=()=>i(!0),c=()=>i(!1);return n.addEventListener("ionScrollStart",a),n.addEventListener("ionScrollEnd",c),e.addEventListener("blur",s),()=>{n.removeEventListener("ionScrollStart",a),n.removeEventListener("ionScrollEnd",c),e.addEventListener("ionBlur",s)}}(t,e,i);m.set(t,n)}if(i&&s&&!h.has(t)){const o=a(t,e,i,n);h.set(t,o)}}}f&&u&&function(t){let e=!0,n=!1;t.addEventListener("ionScrollStart",function(){n=!0}),t.addEventListener("focusin",function(){e=!0},!0),t.addEventListener("touchend",function(o){if(n)return void(n=!1);const r=t.activeElement;if(!r)return;if(r.matches(i))return;const s=o.target;s!==r&&(s.matches(i)||s.closest(i)||s.classList.contains("input-cover")||(e=!1,setTimeout(()=>{e||r.blur()},50)))},!1)}(t),p&&d&&function(t,e){t.addEventListener("focusin",function(t){l(t.target,e)}),t.addEventListener("focusout",function(t){l(t.target,0)})}(t,n);const E=Array.from(t.querySelectorAll("ion-input"));for(const t of E)v(t);t.body.addEventListener("ionInputDidLoad",t=>{v(t.target)}),t.body.addEventListener("ionInputDidUnload",t=>{!function(t){if(c){const e=m.get(t);e&&e(),m.delete(t)}if(s){const e=h.get(t);e&&e(),h.delete(t)}}(t.target)})}export{f as startInputShims};