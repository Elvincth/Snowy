/*!
 * (C) Ionic http://ionicframework.com - MIT License
 * Built with http://stenciljs.com
 */
const{h:e}=window.Ionic;let n=0;function t(e,t){const o=e.ownerDocument;!function(e){0===n&&(n=1,e.body.addEventListener("keyup",n=>{if("Escape"===n.key){const n=s(e);n&&n.backdropDismiss&&n.dismiss("backdrop")}}))}(o),Object.assign(e,t),e.classList.add("ion-page-invisible");const a=n++;return e.overlayIndex=a,e.hasAttribute("id")||(e.id=`ion-overlay-${a}`),d(o).appendChild(e),o.body.addEventListener("ionBackButton",e=>{e.detail.register(100,()=>i(o))}),o.body.addEventListener("keyup",e=>{"Escape"===e.key&&i(o)}),e.componentOnReady()}function i(e){const n=s(e);return n&&n.backdropDismiss?n.dismiss(null,u):Promise.resolve()}function o(e,n,t,i,o){const a=s(e,i,o);return a?a.dismiss(n,t):Promise.reject("overlay does not exist")}function s(e,n,t){const i=function(e,n){const t=Array.from(d(e).children);return void 0===n?t:(n=n.toUpperCase(),t.filter(e=>e.tagName===n))}(e,n);return void 0===t?i[i.length-1]:i.find(e=>e.id===t)}async function a(e,n,t,i,o){if(e.presented)return;e.presented=!0,e.willPresent.emit();const s=e.enterAnimation?e.enterAnimation:e.config.get(n,"ios"===e.mode?t:i);await c(e,s,e.el,o),e.didPresent.emit()}async function r(e,n,t,i,o,s,a){if(!e.presented)return!1;e.presented=!1,e.willDismiss.emit({data:n,role:t});const r=e.leaveAnimation?e.leaveAnimation:e.config.get(i,"ios"===e.mode?o:s);return await c(e,r,e.el,a),e.didDismiss.emit({data:n,role:t}),e.el.remove(),!0}function d(e){return e.querySelector("ion-app")||e.body}async function c(e,n,t,i){e.animation&&(e.animation.destroy(),e.animation=void 0),t.classList.remove("ion-page-invisible");const o=t.shadowRoot||e.el,s=e.animation=await e.animationCtrl.create(n,o,i);e.animation=s,e.animated||s.duration(0),e.keyboardClose&&s.beforeAddWrite(()=>{const e=t.ownerDocument.activeElement;e&&e.matches("input, ion-input, ion-textarea")&&e.blur()}),await s.playAsync(),s.destroy(),e.animation=void 0}function m(e,n){let t;const i=new Promise(e=>t=e);return function(e,n,i){const o=i=>{e.removeEventListener(n,o),(e=>{t(e.detail)})(i)};e.addEventListener(n,o)}(e,n),i}function l(e){return"cancel"===e||e===u}const u="backdrop";export{u as a,r as b,m as c,l as d,a as e,t as f,o as g,s as h};